(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[2],{65:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"f",(function(){return b})),r.d(t,"e",(function(){return j})),r.d(t,"c",(function(){return h})),r.d(t,"b",(function(){return f})),r.d(t,"d",(function(){return d}));var a=r(66),n=r.n(a),c=r(68),s="https://api.themoviedb.org/3",i="cc0ba8d7ea5bf241e069bff954347f20",o="".concat(s,"/trending/movie/day?api_key=").concat(i),u="https://image.tmdb.org/t/p/w500";function l(){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(n.a.mark((function e(){var t,r,a,c=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"",r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,fetch(t,r);case 4:if(!(a=e.sent).ok){e.next=11;break}return e.next=8,a.json();case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=Promise.reject(new Error("Not found"));case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return l(o)}function j(e){return l("".concat(s,"/search/movie?api_key=").concat(i,"&query=").concat(e,"&language=en-US&page=1&include_adult=false"))}function h(e){return console.log(e),l("".concat(s,"/movie/").concat(e,"?api_key=").concat(i,"&language=en-US"))}function f(e){return l("".concat(s,"/movie/").concat(e,"/credits?api_key=").concat(i,"&language=en-US"))}function d(e){return l("".concat(s,"/movie/").concat(e,"/reviews?api_key=").concat(i,"&language=en-US"))}},69:function(e,t,r){e.exports={message:"FilmErrorView_message__2X1Fi"}},70:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r(1),n=r(69),c=r.n(n);var s=function(e){var t=e.message;return Object(a.jsx)("div",{role:"alert",children:Object(a.jsxs)("p",{className:c.a.message,children:["Sorry, something went wrong. Error: ",t]})})}},73:function(e,t,r){e.exports={searchbar:"Searchbar_searchbar__32fY4",searchForm:"Searchbar_searchForm__3BHHd",searchFormButton:"Searchbar_searchFormButton__pXW8Q",searchFormButtonLabel:"Searchbar_searchFormButtonLabel__2IBGm",searchFormInput:"Searchbar_searchFormInput__3hEVe"}},74:function(e,t,r){e.exports={list:"FilmGallery_list__3mD0R",item:"FilmGallery_item__2tOeo",link:"FilmGallery_link__2W9Vg",image:"FilmGallery_image__2zuA6",title:"FilmGallery_title__1rMMg"}},75:function(e,t,r){e.exports={message:"FilmStatus_message__2VzVv"}},81:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return k}));var a=r(80),n=r(64),c=r(1),s=r(0),i=r(3),o=r(79),u=r(17),l=(r(72),r(73)),m=r.n(l);var b=function(e){var t=e.onSubmit,r=Object(s.useState)(""),a=Object(n.a)(r,2),i=a[0],l=a[1];return Object(c.jsx)("header",{className:m.a.searchbar,children:Object(c.jsxs)("form",{className:m.a.searchForm,onSubmit:function(e){e.preventDefault(),""!==i.trim()?(t(i),l("")):Object(u.b)("Please enter search query")},children:[Object(c.jsx)("input",{value:i,onChange:function(e){return l(e.currentTarget.value.toLowerCase())},className:m.a.searchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search films"}),Object(c.jsx)("button",{type:"submit",className:m.a.searchFormButton,children:Object(c.jsx)(o.a,{})})]})})},j=r(65),h=r(70),f=r(16),d=r(10),p=r(74),_=r.n(p);var g=function(e){var t=e.films,r=Object(i.i)().url;return Object(c.jsx)("ul",{className:_.a.list,children:t.map((function(e){return Object(c.jsx)("li",{className:_.a.item,children:Object(c.jsxs)(d.b,{to:"".concat(r,"/").concat(e.id),className:_.a.link,children:[Object(c.jsx)("img",{className:_.a.image,src:j.a+e.poster_path,alt:e.title,width:"300",height:"450"}),Object(c.jsx)("p",{className:_.a.title,children:e.title})]})},e.id)}))})},O=r(75),v=r.n(O),x="idle",y="pending",F="resolved",S="rejected";var w=function(e){var t=e.filmName,r=e.queryURL,a=Object(s.useState)({}),i=Object(n.a)(a,2),o=i[0],u=i[1],l=Object(s.useState)(x),m=Object(n.a)(l,2),b=m[0],d=m[1],p=Object(s.useState)([]),_=Object(n.a)(p,2),O=_[0],w=_[1],k=function(e){d(y),Object(j.e)(e).then((function(e){if(!(e.total_results>0))return Promise.reject(new Error("Invalid request"));w(e.results),d(F)})).catch((function(e){u(e),d(S)}))};return Object(s.useEffect)((function(){k(""===t&&r?r:t)}),[t,r]),b===x?Object(c.jsx)("p",{className:v.a.message,children:"Please enter your search term"}):b===y?Object(c.jsx)(f.a,{}):b===S?Object(c.jsx)(h.a,{message:o.message}):b===F?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(g,{films:O})}):void 0};function k(){var e=Object(i.f)(),t=Object(i.g)(),r=Object(s.useState)(""),o=Object(n.a)(r,2),u=o[0],l=o[1],m=Object(s.useState)([]),j=Object(n.a)(m,2),h=(j[0],j[1]),f=new URLSearchParams(t.search).get("query");return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(b,{onSubmit:function(r){var n;l(r),h([]),n=r,e.push(Object(a.a)(Object(a.a)({},t),{},{search:"query=".concat(n)}))}}),Object(c.jsx)(w,{filmName:u,queryURL:f})]})}}}]);
//# sourceMappingURL=MoviesPage.9489ed54.chunk.js.map